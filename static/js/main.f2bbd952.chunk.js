(this["webpackJsonpvaccine-availability-checker"]=this["webpackJsonpvaccine-availability-checker"]||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(8),i=a.n(c),r=(a(82),a(11)),o=a(12),s=(a(83),a(84),a(31)),d=a(46),u=a.n(d),b=a(152),j=a(15),f=a(33),v=a.n(f),m=a(47),O=a(39),h=a.n(O),p=a(147),g=a(155),S=a(158),x=a(150),C=a(156),_=a(157),y=a(153),A=a(14),E=a(51),T=a(66),D=a.n(T),G=a(15).GET_CENTERS_BY_DISTRICT,w=function(){var e=Object(m.a)(v.a.mark((function e(t,a){var n,l,c,i,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],l=0;l<t.length;l++)for(c=0;c<4*a;c++)i=h.a.get("".concat(G),{params:{district_id:t[l],date:u()().add(7*c,"days").format("DD-MM-YYYY")}}).then((function(e){return e.data.centers})),n.push(i);return e.next=4,Promise.all(n);case 4:return r=e.sent,o=r.reduce((function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(t))}),[]),e.abrupt("return",F(o));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=function(e){var t=new Set,a=new Set,n=I(e).map((function(e,n){var l={all:{any_total:0}};return e.sessions.forEach((function(e){var n,c,i,o,s,d,u,b=e.min_age_limit,j=e.available_capacity,f=e.vaccine;t.add(f),a.add(b),l=Object(r.a)(Object(r.a)({},l),{},(u={},Object(A.a)(u,b,Object(r.a)(Object(r.a)({},l[b]),{},(i={},Object(A.a)(i,f,Object(r.a)(Object(r.a)({},null===(n=l[b])||void 0===n?void 0:n[f]),{},Object(A.a)({},e.date,j))),Object(A.a)(i,"any",Object(r.a)(Object(r.a)({},null===(c=l[b])||void 0===c?void 0:c.any),{},Object(A.a)({},e.date,j))),i))),Object(A.a)(u,"all",Object(r.a)(Object(r.a)({},l.all),{},(d={},Object(A.a)(d,f,Object(r.a)(Object(r.a)({},null===(o=l.all)||void 0===o?void 0:o[f]),{},Object(A.a)({},e.date,j))),Object(A.a)(d,"any",Object(r.a)(Object(r.a)({},null===(s=l.all)||void 0===s?void 0:s.any),{},Object(A.a)({},e.date,j))),d))),u));var v="".concat(f,"_total");l[b][v]=l[b][v]?l[b][v]+j:j,l[b].any_total=l[b].any_total?l[b].any_total+j:j,l.all[v]=l.all[v]?l.all[v]+j:j,l.all.any_total+=j})),e.availability=l,e}));return[e,t,a,n]},I=function(e){var t={},a=[];return e.forEach((function(e,n){var l=t[e.center_id];if(void 0===l)a.push(e),t[e.center_id]=a.length-1;else{var c=a[l];a[l]=D()(c,e)}})),a},N=a(5),R=Object(p.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),k=function(e){var t,a,l=R(),c=e.states,i=e.setStates,r=e.stateSelected,s=e.setStateSelected,d=e.districts,u=e.setDistricts,b=e.districtsSelected,f=e.setDistrictsSelected,O=e.setRawCenters,p=e.setCenters,A=e.vaccines,E=e.setVaccines,T=e.vaccineSelected,D=e.setVaccineSelected,G=e.ageGroup,F=e.setAgeGroup,I=e.ageGroupSelected,k=e.setAgeGroupSelected,L=e.durationSelected,U=e.setDurationSelected;Object(n.useEffect)((function(){h.a.get(j.GET_STATES).then((function(e){i(e.data.states)}))}),[]);var V=function(){O(null),p(null),E(null),D(j.DEFAULT_VACCINE),F(null),k(j.DEFAULT_AGE)},Y=function(e,t){V(),new Promise(function(){var a=Object(m.a)(v.a.mark((function a(n){var l,c,i,r,s,d;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w(e,t);case 2:l=a.sent,c=Object(o.a)(l,4),i=c[0],r=c[1],s=c[2],d=c[3],O(i),E(r),F(s),p(d),n();case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},M=function(e){switch(e){case 18:return"18-44";case 45:return"45+";default:return e}};return Object(N.jsxs)("div",{children:[Object(N.jsxs)(x.a,{variant:"outlined",className:l.formControl,children:[Object(N.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"States"}),Object(N.jsxs)(y.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:r,onChange:function(e){var t=e.target.value;s(t),u(null),f([]),V(),h.a.get("".concat(j.GET_DISTRICTS,"/").concat(t)).then((function(e){u(e.data.districts)}))},label:"State",children:[Object(N.jsx)(_.a,{value:"",children:Object(N.jsx)("em",{children:"None"})}),null===c||void 0===c?void 0:c.map((function(e,t){var a=e.state_id,n=e.state_name;return Object(N.jsx)(_.a,{value:a,children:n},t)}))]})]}),d?Object(N.jsxs)(x.a,{variant:"outlined",className:l.formControl,children:[Object(N.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"Districts"}),Object(N.jsx)(y.a,{labelId:"demo-simple-select-outlined-label",multiple:!0,id:"demo-simple-select-outlined",value:b,onChange:function(e){var t=e.target.value;f(t),Y(t,L)},label:"Districts",renderValue:function(e){return d.reduce((function(t,a){return e.some((function(e){return a.district_id===e}))?"".concat(t,", ").concat(a.district_name):t}),"").slice(1)},children:null===d||void 0===d?void 0:d.map((function(e,t){var a=e.district_id,n=e.district_name;return Object(N.jsxs)(_.a,{value:a,children:[Object(N.jsx)(g.a,{checked:b.indexOf(a)>-1}),Object(N.jsx)(S.a,{primary:n})]},t)}))})]}):null,A?Object(N.jsxs)(x.a,{variant:"outlined",className:l.formControl,children:[Object(N.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"Vaccines"}),Object(N.jsxs)(y.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:T,onChange:function(e){var t=e.target.value;D(t)},label:"Vaccines",children:[Object(N.jsx)(_.a,{value:j.DEFAULT_VACCINE,children:Object(N.jsx)("em",{children:"Any"})}),null===(t=Array.from(A))||void 0===t?void 0:t.map((function(e,t){return Object(N.jsx)(_.a,{value:e,children:e},t)}))]})]}):null,G?Object(N.jsxs)(x.a,{variant:"outlined",className:l.formControl,children:[Object(N.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"Age Group"}),Object(N.jsxs)(y.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:I,onChange:function(e){var t=e.target.value;k(t)},label:"Age Group",children:[Object(N.jsx)(_.a,{value:j.DEFAULT_AGE,children:Object(N.jsx)("em",{children:"All"})}),null===(a=Array.from(G))||void 0===a?void 0:a.map((function(e,t){return Object(N.jsx)(_.a,{value:e,children:M(e)},t)}))]})]}):null,A&&G?Object(N.jsxs)(x.a,{variant:"outlined",className:l.formControl,children:[Object(N.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"Duration"}),Object(N.jsxs)(y.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:L,onChange:function(e){var t=e.target.value;U(t),Y(b,t)},label:"Duration",children:[Object(N.jsx)(_.a,{value:"1",children:"1 Month"}),Object(N.jsx)(_.a,{value:"2",children:"2 Month"})]})]}):null]})},L=function(){var e=l.a.useState(null),t=Object(o.a)(e,2),a=t[0],n=t[1],c=l.a.useState(""),i=Object(o.a)(c,2),d=i[0],f=i[1],v=l.a.useState(null),m=Object(o.a)(v,2),O=m[0],h=m[1],p=l.a.useState([]),g=Object(o.a)(p,2),S=g[0],x=g[1],C=l.a.useState(null),_=Object(o.a)(C,2),y=_[0],A=_[1],E=l.a.useState(null),T=Object(o.a)(E,2),D=T[0],G=T[1],w=l.a.useState(null),F=Object(o.a)(w,2),I=F[0],R=F[1],L=l.a.useState(j.DEFAULT_VACCINE),U=Object(o.a)(L,2),V=U[0],Y=U[1],M=l.a.useState(null),P=Object(o.a)(M,2),B=P[0],W=P[1],J=l.a.useState(j.DEFAULT_AGE),z=Object(o.a)(J,2),q=z[0],H=z[1],K=l.a.useState(j.DEFAULT_DURATION),Q=Object(o.a)(K,2),X=Q[0],Z=Q[1],$={states:a,setStates:n,stateSelected:d,setStateSelected:f,districts:O,setDistricts:h,districtsSelected:S,setDistrictsSelected:x,rawCenters:y,setRawCenters:A,centers:D,setCenters:G,vaccines:I,setVaccines:R,vaccineSelected:V,setVaccineSelected:Y,ageGroup:B,setAgeGroup:W,ageGroupSelected:q,setAgeGroupSelected:H,durationSelected:X,setDurationSelected:Z},ee=Array.apply(null,new Array(28*parseInt(X))).map((function(e,t){return u()().add(t,"days").format("DD-MM-YYYY")})),te=function(e){var t=e.value;switch(t){case void 0:return"NA";case 0:return"Booked";default:return t}},ae=function(e){var t={textAlign:"center",fontWeight:"700",border:"1px solid rgb(186, 191, 199)"};switch(e.value){case void 0:return Object(r.a)({color:"rgba(0, 0, 0, 0.87)",backgroundColor:"#e0e0e0"},t);case 0:return Object(r.a)({color:"#fff",backgroundColor:"rgb(220, 0, 78)"},t);default:return Object(r.a)({color:"#fff",backgroundColor:"#2ecc71"},t)}};return Object(N.jsxs)("div",{children:[Object(N.jsx)(k,Object(r.a)({},$)),(null===D||void 0===D?void 0:D.length)?Object(N.jsx)("div",{className:"ag-theme-alpine",style:{height:"calc(100vh - 72px)",width:"100%"},children:Object(N.jsxs)(s.AgGridReact,{defaultColDef:{width:120,floatingFilter:!0,resizable:!0,suppressMovable:!0},enableCellTextSelection:!0,defaultColGroupDef:{marryChildren:!0},animateRows:!0,isExternalFilterPresent:function(){return!0},doesExternalFilterPass:function(e){var t;return void 0!==(null===(t=e.data.availability[q])||void 0===t?void 0:t["".concat(V,"_total")])},tooltipShowDelay:0,rowData:D,children:[Object(N.jsx)(s.AgGridColumn,{field:"pincode",sortable:!0,filter:!0,pinned:"left"}),Object(N.jsx)(s.AgGridColumn,{field:"name",tooltipField:"name",sortable:!0,filter:!0,width:200,pinned:"left"}),Object(N.jsx)(s.AgGridColumn,{headerName:"Fee",field:"fee_type",valueGetter:function(e){var t=e.data,a=t.fee_type,n=t.vaccine_fees;return(null===n||void 0===n?void 0:n[0].fee)||a},valueFormatter:function(e){var t=e.data,a=t.fee_type,n=t.vaccine_fees;return n?"\u20b9 ".concat(null===n||void 0===n?void 0:n[0].fee):a},sortable:!0,filter:!0,pinned:"left",cellStyle:function(e){var t={textAlign:"center",fontWeight:"700",border:"1px solid rgb(186, 191, 199)"};switch(e.value){case"Free":return Object(r.a)({color:"#fff",backgroundColor:"#2196f3"},t);default:return Object(r.a)({color:"#fff",backgroundColor:"#ff9800"},t)}}}),Object(N.jsx)(s.AgGridColumn,{headerName:"# Total",field:"availability.".concat(q,".").concat(V,"_total"),sortable:!0,filter:!1,width:120,pinned:"left",valueFormatter:te,cellStyle:ae,sort:"desc"}),null===ee||void 0===ee?void 0:ee.map((function(e,t){return Object(N.jsx)(s.AgGridColumn,{headerName:e,field:"availability.".concat(q,".").concat(V,".").concat(e),sortable:!0,filter:!1,width:130,valueFormatter:te,cellStyle:ae},t)}))]})}):S.length?Object(N.jsx)("div",{style:{height:"calc(100vh - 72px)",width:"100%",display:"flex",justifyContent:"center"},children:Object(N.jsx)(b.a,{style:{alignSelf:"center"}})}):null]})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,160)).then((function(t){var a=t.getCLS,n=t.getFID,l=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),l(e),c(e),i(e)}))};i.a.render(Object(N.jsx)(l.a.StrictMode,{children:Object(N.jsx)(L,{})}),document.getElementById("root")),U()},15:function(e,t,a){"use strict";a.r(t),a.d(t,"SERVER_API_URL",(function(){return n})),a.d(t,"GET_STATES",(function(){return l})),a.d(t,"GET_DISTRICTS",(function(){return c})),a.d(t,"GET_CENTERS_BY_DISTRICT",(function(){return i})),a.d(t,"DEFAULT_VACCINE",(function(){return r})),a.d(t,"DEFAULT_AGE",(function(){return o})),a.d(t,"DEFAULT_DURATION",(function(){return s}));var n="https://cdn-api.co-vin.in/api/v2",l="".concat(n,"/admin/location/states"),c="".concat(n,"/admin/location/districts"),i="".concat(n,"/appointment/sessions/public/calendarByDistrict"),r="any",o="all",s=1},82:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.f2bbd952.chunk.js.map