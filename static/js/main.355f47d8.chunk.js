(this["webpackJsonpvaccine-availability-checker"]=this["webpackJsonpvaccine-availability-checker"]||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(8),l=a.n(i),r=(a(81),a(17)),s=a(11),o=(a(82),a(83),a(30)),d=a(46),u=a.n(d),b=a(23),j=a(32),f=a.n(j),v=a(47),m=a(39),p=a.n(m),h=a(147),O=a(154),S=a(157),g=a(150),x=a(155),C=a(156),A=a(152),_=a(37),T=a(51),D=a(66),E=a.n(D),y=a(23).GET_CENTERS_BY_DISTRICT,G=function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,c,i,l,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],c=0;c<t.length;c++)for(i=0;i<4*a;i++)l=p.a.get("".concat(y),{params:{district_id:t[c],date:u()().add(7*i,"days").format("DD-MM-YYYY")}}).then((function(e){return e.data.centers})),n.push(l);return e.next=4,Promise.all(n);case 4:return r=e.sent,s=r.reduce((function(e,t){return[].concat(Object(T.a)(e),Object(T.a)(t))}),[]),e.abrupt("return",w(s));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(e){var t=new Set,a=new Set,n=I(e).map((function(e,n){var c={total:0};return e.sessions.forEach((function(e){var n,i=e.min_age_limit,l=e.available_capacity,s=e.vaccine;t.add(s),a.add(i),c[i]=Object(r.a)(Object(r.a)({},c[i]),{},Object(_.a)({},s,Object(r.a)(Object(r.a)({},null===(n=c[i])||void 0===n?void 0:n[s]),{},Object(_.a)({},e.date,l))));var o="".concat(s,"_total");c[i][o]=c[i][o]?c[i][o]+l:l,c.total+=l})),e.availability=c,e}));return[e,t,a,n]},I=function(e){var t={},a=[];return e.forEach((function(e,n){var c=t[e.center_id];if(void 0===c)a.push(e),t[e.center_id]=a.length-1;else{var i=a[c];a[c]=E()(i,e)}})),a},N=a(5),F=Object(h.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),R=function(e){var t,a,c=F(),i=e.states,l=e.setStates,r=e.stateSelected,o=e.setStateSelected,d=e.districts,u=e.setDistricts,j=e.districtsSelected,m=e.setDistrictsSelected,h=e.setRawCenters,_=e.setCenters,T=e.vaccines,D=e.setVaccines,E=e.vaccineSelected,y=e.setVaccineSelected,w=e.ageGroup,I=e.setAgeGroup,R=e.ageGroupSelected,k=e.setAgeGroupSelected,V=e.durationSelected,Y=e.setDurationSelected;Object(n.useEffect)((function(){p.a.get(b.GET_STATES).then((function(e){l(e.data.states)}))}),[]);return Object(N.jsxs)("div",{children:[Object(N.jsxs)(g.a,{variant:"outlined",className:c.formControl,children:[Object(N.jsx)(x.a,{id:"demo-simple-select-outlined-label",children:"States"}),Object(N.jsxs)(A.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:r,onChange:function(e){var t=e.target.value;o(t),u(null),p.a.get("".concat(b.GET_DISTRICTS,"/").concat(t)).then((function(e){u(e.data.districts)}))},label:"State",children:[Object(N.jsx)(C.a,{value:"",children:Object(N.jsx)("em",{children:"None"})}),null===i||void 0===i?void 0:i.map((function(e,t){var a=e.state_id,n=e.state_name;return Object(N.jsx)(C.a,{value:a,children:n},t)}))]})]}),d?Object(N.jsxs)(g.a,{variant:"outlined",className:c.formControl,children:[Object(N.jsx)(x.a,{id:"demo-simple-select-outlined-label",children:"Districts"}),Object(N.jsx)(A.a,{labelId:"demo-simple-select-outlined-label",multiple:!0,id:"demo-simple-select-outlined",value:j,onChange:function(e){var t=e.target.value;m(t),new Promise(function(){var e=Object(v.a)(f.a.mark((function e(a){var n,c,i,l,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t,V);case 2:n=e.sent,c=Object(s.a)(n,4),i=c[0],l=c[1],r=c[2],o=c[3],h(i),D(l),I(r),_(o),a();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},label:"Districts",renderValue:function(e){return d.reduce((function(t,a){return e.some((function(e){return a.district_id===e}))?"".concat(t,", ").concat(a.district_name):t}),"").slice(1)},children:null===d||void 0===d?void 0:d.map((function(e,t){var a=e.district_id,n=e.district_name;return Object(N.jsxs)(C.a,{value:a,children:[Object(N.jsx)(O.a,{checked:j.indexOf(a)>-1}),Object(N.jsx)(S.a,{primary:n})]},t)}))})]}):null,T?Object(N.jsxs)(g.a,{variant:"outlined",className:c.formControl,children:[Object(N.jsx)(x.a,{id:"demo-simple-select-outlined-label",children:"Vaccines"}),Object(N.jsx)(A.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:E,onChange:function(e){var t=e.target.value;y(t)},label:"Vaccines",children:null===(t=Array.from(T))||void 0===t?void 0:t.map((function(e,t){return Object(N.jsx)(C.a,{value:e,children:e},t)}))})]}):null,w?Object(N.jsxs)(g.a,{variant:"outlined",className:c.formControl,children:[Object(N.jsx)(x.a,{id:"demo-simple-select-outlined-label",children:"Age Group"}),Object(N.jsx)(A.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:R,onChange:function(e){var t=e.target.value;k(t)},label:"Age Group",children:null===(a=Array.from(w))||void 0===a?void 0:a.map((function(e,t){return Object(N.jsx)(C.a,{value:e,children:e},t)}))})]}):null,T&&w?Object(N.jsxs)(g.a,{variant:"outlined",className:c.formControl,children:[Object(N.jsx)(x.a,{id:"demo-simple-select-outlined-label",children:"Duration"}),Object(N.jsxs)(A.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:V,onChange:function(e){var t=e.target.value;Y(t)},label:"Duration",children:[Object(N.jsx)(C.a,{value:"1",children:"1 Month"}),Object(N.jsx)(C.a,{value:"2",children:"2 Month"})]})]}):null]})},k=function(){var e=c.a.useState(null),t=Object(s.a)(e,2),a=t[0],n=t[1],i=c.a.useState(""),l=Object(s.a)(i,2),d=l[0],j=l[1],f=c.a.useState(null),v=Object(s.a)(f,2),m=v[0],p=v[1],h=c.a.useState([]),O=Object(s.a)(h,2),S=O[0],g=O[1],x=c.a.useState(null),C=Object(s.a)(x,2),A=C[0],_=C[1],T=c.a.useState(null),D=Object(s.a)(T,2),E=D[0],y=D[1],G=c.a.useState(null),w=Object(s.a)(G,2),I=w[0],F=w[1],k=c.a.useState(b.DEFAULT_VACCINE),V=Object(s.a)(k,2),Y=V[0],L=V[1],U=c.a.useState(null),M=Object(s.a)(U,2),P=M[0],B=M[1],J=c.a.useState(b.DEFAULT_AGE),W=Object(s.a)(J,2),z=W[0],X=W[1],q=c.a.useState(b.DEFAULT_DURATION),H=Object(s.a)(q,2),K=H[0],Q=H[1],Z={states:a,setStates:n,stateSelected:d,setStateSelected:j,districts:m,setDistricts:p,districtsSelected:S,setDistrictsSelected:g,rawCenters:A,setRawCenters:_,centers:E,setCenters:y,vaccines:I,setVaccines:F,vaccineSelected:Y,setVaccineSelected:L,ageGroup:P,setAgeGroup:B,ageGroupSelected:z,setAgeGroupSelected:X,durationSelected:K,setDurationSelected:Q},$=Array.apply(null,new Array(28*parseInt(K))).map((function(e,t){return u()().add(t,"days").format("DD-MM-YYYY")})),ee=function(e){var t=e.value;switch(t){case void 0:return"NA";case 0:return"Booked";default:return t}},te=function(e){var t={textAlign:"center",fontWeight:"700",border:"1px solid rgb(186, 191, 199)"};switch(e.value){case void 0:return Object(r.a)({color:"rgba(0, 0, 0, 0.87)",backgroundColor:"#e0e0e0"},t);case 0:return Object(r.a)({color:"#fff",backgroundColor:"rgb(220, 0, 78)"},t);default:return Object(r.a)({color:"#fff",backgroundColor:"#2ecc71"},t)}};return Object(N.jsxs)("div",{children:[Object(N.jsx)(R,Object(r.a)({},Z)),(null===E||void 0===E?void 0:E.length)?Object(N.jsx)("div",{className:"ag-theme-alpine",style:{height:"calc(100vh - 72px)",width:"100%"},children:Object(N.jsxs)(o.AgGridReact,{defaultColDef:{width:120,floatingFilter:!0,resizable:!0},defaultColGroupDef:{marryChildren:!0},animateRows:!0,isExternalFilterPresent:function(){return!0},doesExternalFilterPass:function(e){var t;return void 0!==(null===(t=e.data.availability[z])||void 0===t?void 0:t["".concat(Y,"_total")])},rowData:E,children:[Object(N.jsx)(o.AgGridColumn,{field:"pincode",sortable:!0,filter:!0,pinned:"left"}),Object(N.jsx)(o.AgGridColumn,{field:"name",sortable:!0,filter:!0,width:200,pinned:"left"}),Object(N.jsx)(o.AgGridColumn,{headerName:"Fee",field:"fee_type",sortable:!0,filter:!0,pinned:"left"}),Object(N.jsx)(o.AgGridColumn,{headerName:"# Total",field:"availability.".concat(z,".").concat(Y,"_total"),sortable:!0,filter:!1,width:120,pinned:"left",valueFormatter:ee,cellStyle:te,sort:"desc"}),null===$||void 0===$?void 0:$.map((function(e,t){return Object(N.jsx)(o.AgGridColumn,{headerName:e,field:"availability.".concat(z,".").concat(Y,".").concat(e),sortable:!0,filter:!1,width:130,valueFormatter:ee,cellStyle:te},t)}))]})}):null]})},V=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,159)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),i(e),l(e)}))};l.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(k,{})}),document.getElementById("root")),V()},23:function(e,t,a){"use strict";a.r(t),a.d(t,"SERVER_API_URL",(function(){return n})),a.d(t,"GET_STATES",(function(){return c})),a.d(t,"GET_DISTRICTS",(function(){return i})),a.d(t,"GET_CENTERS_BY_DISTRICT",(function(){return l})),a.d(t,"DEFAULT_VACCINE",(function(){return r})),a.d(t,"DEFAULT_AGE",(function(){return s})),a.d(t,"DEFAULT_DURATION",(function(){return o}));var n="https://cdn-api.co-vin.in/api/v2",c="".concat(n,"/admin/location/states"),i="".concat(n,"/admin/location/districts"),l="".concat(n,"/appointment/sessions/public/calendarByDistrict"),r="COVAXIN",s=18,o=1},81:function(e,t,a){}},[[114,1,2]]]);
//# sourceMappingURL=main.355f47d8.chunk.js.map