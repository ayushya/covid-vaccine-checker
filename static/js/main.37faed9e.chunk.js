(this["webpackJsonpvaccine-availability-checker"]=this["webpackJsonpvaccine-availability-checker"]||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(8),i=n.n(l),r=(n(82),n(18)),s=n(11),o=(n(83),n(84),n(30)),d=n(46),u=n.n(d),b=n(152),j=n(16),f=n(32),v=n.n(f),m=n(47),h=n(39),p=n.n(h),O=n(147),g=n(155),S=n(158),x=n(150),C=n(156),A=n(157),_=n(153),E=n(37),T=n(51),D=n(66),y=n.n(D),G=n(16).GET_CENTERS_BY_DISTRICT,w=function(){var e=Object(m.a)(v.a.mark((function e(t,n){var a,c,l,i,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],c=0;c<t.length;c++)for(l=0;l<4*n;l++)i=p.a.get("".concat(G),{params:{district_id:t[c],date:u()().add(7*l,"days").format("DD-MM-YYYY")}}).then((function(e){return e.data.centers})),a.push(i);return e.next=4,Promise.all(a);case 4:return r=e.sent,s=r.reduce((function(e,t){return[].concat(Object(T.a)(e),Object(T.a)(t))}),[]),e.abrupt("return",I(s));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){var t=new Set,n=new Set,a=N(e).map((function(e,a){var c={total:0};return e.sessions.forEach((function(e){var a,l=e.min_age_limit,i=e.available_capacity,s=e.vaccine;t.add(s),n.add(l),c[l]=Object(r.a)(Object(r.a)({},c[l]),{},Object(E.a)({},s,Object(r.a)(Object(r.a)({},null===(a=c[l])||void 0===a?void 0:a[s]),{},Object(E.a)({},e.date,i))));var o="".concat(s,"_total");c[l][o]=c[l][o]?c[l][o]+i:i,c.total+=i})),e.availability=c,e}));return[e,t,n,a]},N=function(e){var t={},n=[];return e.forEach((function(e,a){var c=t[e.center_id];if(void 0===c)n.push(e),t[e.center_id]=n.length-1;else{var l=n[c];n[c]=y()(l,e)}})),n},F=n(5),R=Object(O.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),V=function(e){var t,n,c=R(),l=e.states,i=e.setStates,r=e.stateSelected,o=e.setStateSelected,d=e.districts,u=e.setDistricts,b=e.districtsSelected,f=e.setDistrictsSelected,h=e.setRawCenters,O=e.setCenters,E=e.vaccines,T=e.setVaccines,D=e.vaccineSelected,y=e.setVaccineSelected,G=e.ageGroup,I=e.setAgeGroup,N=e.ageGroupSelected,V=e.setAgeGroupSelected,k=e.durationSelected,L=e.setDurationSelected;Object(a.useEffect)((function(){p.a.get(j.GET_STATES).then((function(e){i(e.data.states)}))}),[]);var U=function(){h(null),O(null),T(null),y(j.DEFAULT_VACCINE),I(null),V(j.DEFAULT_AGE)},Y=function(e,t){U(),new Promise(function(){var n=Object(m.a)(v.a.mark((function n(a){var c,l,i,r,o,d;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w(e,t);case 2:c=n.sent,l=Object(s.a)(c,4),i=l[0],r=l[1],o=l[2],d=l[3],h(i),T(r),I(o),O(d),a();case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())};return Object(F.jsxs)("div",{children:[Object(F.jsxs)(x.a,{variant:"outlined",className:c.formControl,children:[Object(F.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"States"}),Object(F.jsxs)(_.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:r,onChange:function(e){var t=e.target.value;o(t),u(null),f([]),U(),p.a.get("".concat(j.GET_DISTRICTS,"/").concat(t)).then((function(e){u(e.data.districts)}))},label:"State",children:[Object(F.jsx)(A.a,{value:"",children:Object(F.jsx)("em",{children:"None"})}),null===l||void 0===l?void 0:l.map((function(e,t){var n=e.state_id,a=e.state_name;return Object(F.jsx)(A.a,{value:n,children:a},t)}))]})]}),d?Object(F.jsxs)(x.a,{variant:"outlined",className:c.formControl,children:[Object(F.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"Districts"}),Object(F.jsx)(_.a,{labelId:"demo-simple-select-outlined-label",multiple:!0,id:"demo-simple-select-outlined",value:b,onChange:function(e){var t=e.target.value;f(t),Y(t,k)},label:"Districts",renderValue:function(e){return d.reduce((function(t,n){return e.some((function(e){return n.district_id===e}))?"".concat(t,", ").concat(n.district_name):t}),"").slice(1)},children:null===d||void 0===d?void 0:d.map((function(e,t){var n=e.district_id,a=e.district_name;return Object(F.jsxs)(A.a,{value:n,children:[Object(F.jsx)(g.a,{checked:b.indexOf(n)>-1}),Object(F.jsx)(S.a,{primary:a})]},t)}))})]}):null,E?Object(F.jsxs)(x.a,{variant:"outlined",className:c.formControl,children:[Object(F.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"Vaccines"}),Object(F.jsx)(_.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:D,onChange:function(e){var t=e.target.value;y(t)},label:"Vaccines",children:null===(t=Array.from(E))||void 0===t?void 0:t.map((function(e,t){return Object(F.jsx)(A.a,{value:e,children:e},t)}))})]}):null,G?Object(F.jsxs)(x.a,{variant:"outlined",className:c.formControl,children:[Object(F.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"Age Group"}),Object(F.jsx)(_.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:N,onChange:function(e){var t=e.target.value;V(t)},label:"Age Group",children:null===(n=Array.from(G))||void 0===n?void 0:n.map((function(e,t){return Object(F.jsx)(A.a,{value:e,children:e},t)}))})]}):null,E&&G?Object(F.jsxs)(x.a,{variant:"outlined",className:c.formControl,children:[Object(F.jsx)(C.a,{id:"demo-simple-select-outlined-label",children:"Duration"}),Object(F.jsxs)(_.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:k,onChange:function(e){var t=e.target.value;L(t),Y(b,t)},label:"Duration",children:[Object(F.jsx)(A.a,{value:"1",children:"1 Month"}),Object(F.jsx)(A.a,{value:"2",children:"2 Month"})]})]}):null]})},k=function(){var e=c.a.useState(null),t=Object(s.a)(e,2),n=t[0],a=t[1],l=c.a.useState(""),i=Object(s.a)(l,2),d=i[0],f=i[1],v=c.a.useState(null),m=Object(s.a)(v,2),h=m[0],p=m[1],O=c.a.useState([]),g=Object(s.a)(O,2),S=g[0],x=g[1],C=c.a.useState(null),A=Object(s.a)(C,2),_=A[0],E=A[1],T=c.a.useState(null),D=Object(s.a)(T,2),y=D[0],G=D[1],w=c.a.useState(null),I=Object(s.a)(w,2),N=I[0],R=I[1],k=c.a.useState(j.DEFAULT_VACCINE),L=Object(s.a)(k,2),U=L[0],Y=L[1],M=c.a.useState(null),P=Object(s.a)(M,2),B=P[0],J=P[1],W=c.a.useState(j.DEFAULT_AGE),z=Object(s.a)(W,2),X=z[0],q=z[1],H=c.a.useState(j.DEFAULT_DURATION),K=Object(s.a)(H,2),Q=K[0],Z=K[1],$={states:n,setStates:a,stateSelected:d,setStateSelected:f,districts:h,setDistricts:p,districtsSelected:S,setDistrictsSelected:x,rawCenters:_,setRawCenters:E,centers:y,setCenters:G,vaccines:N,setVaccines:R,vaccineSelected:U,setVaccineSelected:Y,ageGroup:B,setAgeGroup:J,ageGroupSelected:X,setAgeGroupSelected:q,durationSelected:Q,setDurationSelected:Z},ee=Array.apply(null,new Array(28*parseInt(Q))).map((function(e,t){return u()().add(t,"days").format("DD-MM-YYYY")})),te=function(e){var t=e.value;switch(t){case void 0:return"NA";case 0:return"Booked";default:return t}},ne=function(e){var t={textAlign:"center",fontWeight:"700",border:"1px solid rgb(186, 191, 199)"};switch(e.value){case void 0:return Object(r.a)({color:"rgba(0, 0, 0, 0.87)",backgroundColor:"#e0e0e0"},t);case 0:return Object(r.a)({color:"#fff",backgroundColor:"rgb(220, 0, 78)"},t);default:return Object(r.a)({color:"#fff",backgroundColor:"#2ecc71"},t)}};return Object(F.jsxs)("div",{children:[Object(F.jsx)(V,Object(r.a)({},$)),(null===y||void 0===y?void 0:y.length)?Object(F.jsx)("div",{className:"ag-theme-alpine",style:{height:"calc(100vh - 72px)",width:"100%"},children:Object(F.jsxs)(o.AgGridReact,{defaultColDef:{width:120,floatingFilter:!0,resizable:!0},defaultColGroupDef:{marryChildren:!0},animateRows:!0,isExternalFilterPresent:function(){return!0},doesExternalFilterPass:function(e){var t;return void 0!==(null===(t=e.data.availability[X])||void 0===t?void 0:t["".concat(U,"_total")])},rowData:y,children:[Object(F.jsx)(o.AgGridColumn,{field:"pincode",sortable:!0,filter:!0,pinned:"left"}),Object(F.jsx)(o.AgGridColumn,{field:"name",sortable:!0,filter:!0,width:200,pinned:"left"}),Object(F.jsx)(o.AgGridColumn,{headerName:"Fee",field:"fee_type",sortable:!0,filter:!0,pinned:"left"}),Object(F.jsx)(o.AgGridColumn,{headerName:"# Total",field:"availability.".concat(X,".").concat(U,"_total"),sortable:!0,filter:!1,width:120,pinned:"left",valueFormatter:te,cellStyle:ne,sort:"desc"}),null===ee||void 0===ee?void 0:ee.map((function(e,t){return Object(F.jsx)(o.AgGridColumn,{headerName:e,field:"availability.".concat(X,".").concat(U,".").concat(e),sortable:!0,filter:!1,width:130,valueFormatter:te,cellStyle:ne},t)}))]})}):S.length?Object(F.jsx)("div",{style:{height:"calc(100vh - 72px)",width:"100%",display:"flex",justifyContent:"center"},children:Object(F.jsx)(b.a,{style:{alignSelf:"center"}})}):null]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,160)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,l=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),l(e),i(e)}))};i.a.render(Object(F.jsx)(c.a.StrictMode,{children:Object(F.jsx)(k,{})}),document.getElementById("root")),L()},16:function(e,t,n){"use strict";n.r(t),n.d(t,"SERVER_API_URL",(function(){return a})),n.d(t,"GET_STATES",(function(){return c})),n.d(t,"GET_DISTRICTS",(function(){return l})),n.d(t,"GET_CENTERS_BY_DISTRICT",(function(){return i})),n.d(t,"DEFAULT_VACCINE",(function(){return r})),n.d(t,"DEFAULT_AGE",(function(){return s})),n.d(t,"DEFAULT_DURATION",(function(){return o}));var a="https://cdn-api.co-vin.in/api/v2",c="".concat(a,"/admin/location/states"),l="".concat(a,"/admin/location/districts"),i="".concat(a,"/appointment/sessions/public/calendarByDistrict"),r="COVAXIN",s=18,o=1},82:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.37faed9e.chunk.js.map