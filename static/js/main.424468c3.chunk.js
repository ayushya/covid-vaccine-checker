(this["webpackJsonpvaccine-availability-checker"]=this["webpackJsonpvaccine-availability-checker"]||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),c=a(7),i=a.n(c),r=(a(69),a(15)),s=a(12),o=(a(70),a(71),a(25)),d=a(39),u=a.n(d),b="https://cdn-api.co-vin.in/api/v2",j="".concat(b,"/admin/location/states"),v="".concat(b,"/admin/location/districts"),m="".concat(b,"/appointment/sessions/public/calendarByDistrict"),f=a(33),h=a(42),p=a.n(h),O=a(134),g=a(137),S=a(141),x=a(140),C=a(139),y=a(4),A=Object(O.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),D=function(e){var t,a,n=A(),c=e.states,i=e.setStates,s=e.stateSelected,o=e.setStateSelected,d=e.districts,b=e.setDistricts,h=e.districtSelected,O=e.setDistrictSelected,D=e.setRawCenters,w=e.setCenters,G=e.vaccines,N=e.setVaccines,_=e.vaccineSelected,F=e.setVaccineSelected,k=e.ageGroup,I=e.setAgeGroup,Y=e.ageGroupSelected,M=e.setAgeGroupSelected,V=e.durationSelected,E=e.setDurationSelected;Object(l.useEffect)((function(){p.a.get(j).then((function(e){i(e.data.states)}))}),[]);return Object(y.jsxs)("div",{children:[Object(y.jsxs)(g.a,{variant:"outlined",className:n.formControl,children:[Object(y.jsx)(S.a,{id:"demo-simple-select-outlined-label",children:"States"}),Object(y.jsxs)(C.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:s,onChange:function(e){var t=e.target.value;o(t),b(null),p.a.get("".concat(v,"/").concat(t)).then((function(e){b(e.data.districts)}))},label:"State",children:[Object(y.jsx)(x.a,{value:"",children:Object(y.jsx)("em",{children:"None"})}),null===c||void 0===c?void 0:c.map((function(e,t){var a=e.state_id,l=e.state_name;return Object(y.jsx)(x.a,{value:a,children:l},t)}))]})]}),d?Object(y.jsxs)(g.a,{variant:"outlined",className:n.formControl,children:[Object(y.jsx)(S.a,{id:"demo-simple-select-outlined-label",children:"Districts"}),Object(y.jsx)(C.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:h,onChange:function(e){var t=e.target.value;O(e.target.value),p.a.get("".concat(m),{params:{district_id:t,date:u()().format("DD-MM-YYYY")}}).then((function(e){var t=e.data.centers;D(t);var a=new Set,l=new Set,n=t.map((function(e){var t={total:0};return e.sessions.forEach((function(e){var n,c=e.min_age_limit,i=e.available_capacity,s=e.vaccine;a.add(s),l.add(c),t[c]=Object(r.a)(Object(r.a)({},t[c]),{},Object(f.a)({},s,Object(r.a)(Object(r.a)({},null===(n=t[c])||void 0===n?void 0:n[s]),{},Object(f.a)({},e.date,i))));var o="".concat(s,"_total");t[c][o]=t[c][o]?t[c][o]+i:i,t.total+=i})),e.availability=t,e}));N(a),I(l),w(n)}))},label:"Districts",children:null===d||void 0===d?void 0:d.map((function(e,t){var a=e.district_id,l=e.district_name;return Object(y.jsx)(x.a,{value:a,children:l},t)}))})]}):null,G?Object(y.jsxs)(g.a,{variant:"outlined",className:n.formControl,children:[Object(y.jsx)(S.a,{id:"demo-simple-select-outlined-label",children:"Vaccines"}),Object(y.jsx)(C.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:_,onChange:function(e){var t=e.target.value;F(t)},label:"Vaccines",children:null===(t=Array.from(G))||void 0===t?void 0:t.map((function(e,t){return Object(y.jsx)(x.a,{value:e,children:e},t)}))})]}):null,k?Object(y.jsxs)(g.a,{variant:"outlined",className:n.formControl,children:[Object(y.jsx)(S.a,{id:"demo-simple-select-outlined-label",children:"Age Group"}),Object(y.jsx)(C.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:Y,onChange:function(e){var t=e.target.value;M(t)},label:"Age Group",children:null===(a=Array.from(k))||void 0===a?void 0:a.map((function(e,t){return Object(y.jsx)(x.a,{value:e,children:e},t)}))})]}):null,G&&k?Object(y.jsxs)(g.a,{variant:"outlined",className:n.formControl,children:[Object(y.jsx)(S.a,{id:"demo-simple-select-outlined-label",children:"Duration"}),Object(y.jsxs)(C.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:V,onChange:function(e){var t=e.target.value;E(t)},label:"Duration",children:[Object(y.jsx)(x.a,{value:"1",children:"1 Month"}),Object(y.jsx)(x.a,{value:"2",children:"2 Month"})]})]}):null]})},w=function(){var e=n.a.useState(null),t=Object(s.a)(e,2),a=t[0],l=t[1],c=n.a.useState(""),i=Object(s.a)(c,2),d=i[0],b=i[1],j=n.a.useState(null),v=Object(s.a)(j,2),m=v[0],f=v[1],h=n.a.useState(""),p=Object(s.a)(h,2),O=p[0],g=p[1],S=n.a.useState(null),x=Object(s.a)(S,2),C=x[0],A=x[1],w=n.a.useState(null),G=Object(s.a)(w,2),N=G[0],_=G[1],F=n.a.useState(null),k=Object(s.a)(F,2),I=k[0],Y=k[1],M=n.a.useState("COVAXIN"),V=Object(s.a)(M,2),E=V[0],B=V[1],P=n.a.useState(null),R=Object(s.a)(P,2),T=R[0],J=R[1],L=n.a.useState(18),W=Object(s.a)(L,2),z=W[0],X=W[1],q=n.a.useState(1),H=Object(s.a)(q,2),K=H[0],Q=H[1],U={states:a,setStates:l,stateSelected:d,setStateSelected:b,districts:m,setDistricts:f,districtSelected:O,setDistrictSelected:g,rawCenters:C,setRawCenters:A,centers:N,setCenters:_,vaccines:I,setVaccines:Y,vaccineSelected:E,setVaccineSelected:B,ageGroup:T,setAgeGroup:J,ageGroupSelected:z,setAgeGroupSelected:X,durationSelected:K,setDurationSelected:Q},Z=Array.apply(null,new Array(7)).map((function(e,t){return u()().add(t,"days").format("DD-MM-YYYY")})),$=function(e){var t=e.value;switch(t){case void 0:return"NA";case 0:return"Booked";default:return t}},ee=function(e){var t={textAlign:"center",fontWeight:"700",border:"1px solid rgb(186, 191, 199)"};switch(e.value){case void 0:return Object(r.a)({color:"rgba(0, 0, 0, 0.87)",backgroundColor:"#e0e0e0"},t);case 0:return Object(r.a)({color:"#fff",backgroundColor:"rgb(220, 0, 78)"},t);default:return Object(r.a)({color:"#fff",backgroundColor:"#2ecc71"},t)}};return Object(y.jsxs)("div",{children:[Object(y.jsx)(D,Object(r.a)({},U)),(null===N||void 0===N?void 0:N.length)?Object(y.jsx)("div",{className:"ag-theme-alpine",style:{height:"calc(100vh - 72px)",width:"100%"},children:Object(y.jsxs)(o.AgGridReact,{defaultColDef:{width:120,floatingFilter:!0,resizable:!0},defaultColGroupDef:{marryChildren:!0},animateRows:!0,isExternalFilterPresent:function(){return!0},doesExternalFilterPass:function(e){var t;return void 0!==(null===(t=e.data.availability[z])||void 0===t?void 0:t["".concat(E,"_total")])},rowData:N,children:[Object(y.jsx)(o.AgGridColumn,{field:"pincode",sortable:!0,filter:!0,pinned:"left"}),Object(y.jsx)(o.AgGridColumn,{field:"name",sortable:!0,filter:!0,width:200,pinned:"left"}),Object(y.jsx)(o.AgGridColumn,{headerName:"Fee",field:"fee_type",sortable:!0,filter:!0,pinned:"left"}),Object(y.jsx)(o.AgGridColumn,{headerName:"# Total",field:"availability.".concat(z,".").concat(E,"_total"),sortable:!0,filter:!1,width:120,pinned:"left",valueFormatter:$,cellStyle:ee,sort:"desc"}),null===Z||void 0===Z?void 0:Z.map((function(e,t){return Object(y.jsx)(o.AgGridColumn,{headerName:e,field:"availability.".concat(z,".").concat(E,".").concat(e),sortable:!0,filter:!1,width:130,valueFormatter:$,cellStyle:ee},t)}))]})}):null]})},G=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,143)).then((function(t){var a=t.getCLS,l=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),l(e),n(e),c(e),i(e)}))};i.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(w,{})}),document.getElementById("root")),G()},69:function(e,t,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.424468c3.chunk.js.map